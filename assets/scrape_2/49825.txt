How does the earth cast straight and reversed shadows on the moon?

When the Earth regularly casts a shadow on the moon, why does the shadow progress from circular to a straight line and then to a reversed circle?
Since the earth is a sphere, shouldn't it cast round shadows only?w
I get how the first concave shadow (2nd image) would make sense, but I don't get how it evolves during the month to a straight line and then to a reversed, concave circular shadow (6th image).

Lunar phases, annotated from Wikimedia Commons