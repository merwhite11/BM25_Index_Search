How to distinguish primary hosts (stars) and orbiting satellites (planets) and tertiary bodies (moons) by their mass and trajectory?

Suppose one has run a gravitational simulation of N bodies (has the mass, vector positions, vector velocities, etc for each body), but knows nothing a priori about the system (ie, one does not know anything regarding composition, or which bodies are stars or planets). I would like to use the simulation results to categorize which bodies are primary hosts and which ones are satellites (and if possible, which "tertiary" bodies are orbiting the satellites). Is there a way to create a hierarchy that identifies whether a body is a primary host or satellite or tertiary? I would like to find a method of doing this such that the method can be applied to cases for N > 10^3 bodies.
For context, consider a 9-body system like a simplified example of our solar system (8 planets + 1 star). One can identify the Sun as the only primary host and the planets as the satellites because the ratio of the mass of the Sun to the mass of Jupiter (most massive planet of our solar system) is 1048. One could also use the approach of noticing that the center of mass would be inside of the Sun (or very close to in a point-mass simulation). But, the center of mass approach only works for nearly circular stable orbits around a single host; for unstable orbits, a body can deviate from its tangential path about the center of mass.
If we consider a binary star system for which both stars are of comparable mass, then I think that the ratio of the mass of any single host star to the mass of the most massive planet orbiting this binary star system can decrease; in other words, for each primary host body added to a system, the combined gravitational force at certain points in the orbit required to keep a satellite body in orbit should decrease if the system is stable, thereby decreasing the ratio of the mass of any host body to the mass of the most massive satellite body. (I suppose the same logic could be extended to host planets and satellite moons, though I suspect the ratio of masses would decrease; would this logic also apply to unstable orbits?)
Is this line of thinking correct? More importantly, what is the right way to think about this?