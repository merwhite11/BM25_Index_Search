Weight of a celestial body

How do astronomers find out the correct weight of a planet even though there isn't any direct means to weigh them? What technique do they use? Just curious!