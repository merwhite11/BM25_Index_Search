Does the gravity oppose to the Universe expansion?

I'm trying to understand the very basis of the current cosmology.
I searched in the old questions but I found nothing that answers my questions specifically.
As far as I understand, we have to think the "expansion" more like a "stretching" of the space that makes room for "new" space. This is confirmed because the Universe is homogeneous and non-local.
First question: does the gravity counteract this expansion? In other words: does the space expand more in the areas with less gravity (i.e. among galaxies) and less in the nearby of stars and planets?
If we imagine to place a ruler between two stars, say at 10 ly, it would "extend" over time - even if we will still read 10 ly, right? But if now we place another ruler that was kept in our (huge) pocket, it will measure a longer distance. Is this correct?
That is because the first ruler has expanded together the space between the stars, while the second one endured the force of gravity and was kept rolled up so it wasn't able to expand.