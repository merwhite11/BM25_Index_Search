How does Hawking Radiation work exactly?

I know that a particle and anti particle, virtual particles, spawn at the edge of an event horizon, and one particle falls into the black hole, and the other goes out, but how does the other know how to take energy from the black hole? I mean how does it? Does it just know to take energy from the black hole or does the antiparticle fall in, and the blackhole loses mass?